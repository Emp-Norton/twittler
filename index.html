<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" type="text/css" href ="twittler.css"/>
  </head>
  <body>

    <header> 
      <code> Twittler </code>
    </header>
  
  <div class = "content-well">
    <div class = "tweet-feed" id = "tf">
        <code> tweet feed <br></code>

    </div>
  
    <aside>
      <code>aside <br></code>
    </aside>
  </div>

    <script>
      var $tweetfeed = $('.tweet-feed');
      var tweetList = {};
      $(document).ready(function(){
        var index = 0;
        while(index <= streams.home.length - 1){
          var tweet = streams.home[index];
          tweet.seen = true;
          var tweetElement = $(`<p>@${tweet.user} : ${tweet.message}</p>`);
          tweetElement.appendTo($tweetfeed);
          index += 1;
        }
        setInterval(function(){
          getTweets();
        }, 1000);
      });

      function getTweets(){
        streams.home.forEach(function(tweet, idx){
          if (!tweet.hasOwnProperty("seen")){
            tweet.seen = false;
            tweet.index = idx;
            tweetList[idx] = tweet;
            postTweet(tweet)
          }
        })
      }


      function postTweet(tweet){
        var tweetElement = $(`<p>@${tweet.user} : ${tweet.message}</p>`);
        tweet.seen = true;
        $('.tweet-feed').height('+=35');
        tweetElement.appendTo($tweetfeed); // use before here?
      }


    </script>
  </body>
</html>
